{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst initialState = {\n  adoptions: [],\n  adoption: null,\n  error: {},\n  loading: true\n};\nconst adoptionSlice = createSlice({\n  name: \"adoption\",\n  initialState,\n  reducers: {\n    getAdoptionsSuccess(state, action) {\n      state.adoptions = action.payload;\n      state.adoption = null;\n      state.loading = false;\n    },\n    getAdoptionSuccess(state, action) {\n      state.adoption = action.payload;\n      state.loading = false;\n    },\n    createAdoptionSuccess(state, action) {\n      state.adoptions.unshift(action.payload);\n      state.loading = false;\n    },\n    deleteAdoption(state, action) {\n      const {\n        id\n      } = action.payload;\n      state.adoptions = state.adoptions.filter(adoption => adoption._id !== id);\n      state.loading = false;\n    },\n    applyAdoptionSuccess(state, action) {\n      const updatedAdoptions = state.adoptions.map(adoption => {\n        if (adoption._id === action.payload._id) {\n          return action.payload;\n        }\n        return adoption;\n      });\n      state.adoptions = updatedAdoptions;\n      state.loading = false;\n    },\n    cancelApplySuccess(state, action) {\n      const updatedAdoptions = state.adoptions.map(adoption => {\n        if (adoption._id === action.payload._id) {\n          return action.payload;\n        }\n        return adoption;\n      });\n      state.adoptions = updatedAdoptions;\n      state.loading = false;\n    },\n    clearAdoptions(state, action) {\n      state.adoptions = [];\n    },\n    adoptionError(state, action) {\n      state.error = action.payload;\n      state.loading = false;\n    }\n  }\n});\nexport const {\n  getAdoptionsSuccess,\n  createAdoptionSuccess,\n  getAdoptionSuccess,\n  deleteAdoption,\n  applyAdoptionSuccess,\n  cancelApplySuccess,\n  clearAdoptions,\n  adoptionError\n} = adoptionSlice.actions;\n\n// Async Thunks\nexport const getAdoptions = () => async dispatch => {\n  try {\n    const res = await axios.get(\"/api/adoptions\");\n    dispatch(getAdoptionsSuccess(res.data));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n    console.log(error.response.data);\n  }\n};\nexport const getAdoption = id => async dispatch => {\n  try {\n    const res = await axios.get(`/api/adoptions/${id}`);\n    dispatch(getAdoptionSuccess(res.data));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n  }\n};\nexport const createAdoption = kittenId => async dispatch => {\n  const formData = {\n    kitten: kittenId\n  };\n  try {\n    const res = await axios.post(`/api/adoptions`, formData);\n    dispatch(createAdoptionSuccess(res.data));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n    console.log(error.response.data);\n  }\n};\nexport const removeAdoption = id => async dispatch => {\n  try {\n    await axios.delete(`/api/adoptions/${id}`);\n    dispatch(deleteAdoption(id));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n  }\n};\nexport const applyAdoption = id => async dispatch => {\n  try {\n    const res = await axios.put(`/api/adoptions/apply/${id}`);\n    dispatch(applyAdoptionSuccess(res.data));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n  }\n};\nexport const cancelApply = id => async dispatch => {\n  try {\n    const res = await axios.put(`/api/adoptions/cancel/${id}`);\n    dispatch(cancelApplySuccess(res.data));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n  }\n};\nexport default adoptionSlice.reducer;","map":{"version":3,"names":["createSlice","axios","initialState","adoptions","adoption","error","loading","adoptionSlice","name","reducers","getAdoptionsSuccess","state","action","payload","getAdoptionSuccess","createAdoptionSuccess","unshift","deleteAdoption","id","filter","_id","applyAdoptionSuccess","updatedAdoptions","map","cancelApplySuccess","clearAdoptions","adoptionError","actions","getAdoptions","dispatch","res","get","data","response","console","log","getAdoption","createAdoption","kittenId","formData","kitten","post","removeAdoption","delete","applyAdoption","put","cancelApply","reducer"],"sources":["C:/Users/wangz/OneDrive/文档/GitHub/Kitten/frontend/src/Redux/Reducers/AdoptionSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst initialState = {\r\n  adoptions: [],\r\n  adoption: null,\r\n  error: {},\r\n  loading: true,\r\n};\r\n\r\nconst adoptionSlice = createSlice({\r\n  name: \"adoption\",\r\n  initialState,\r\n  reducers: {\r\n    getAdoptionsSuccess(state, action) {\r\n      state.adoptions = action.payload;\r\n      state.adoption = null;\r\n      state.loading = false;\r\n    },\r\n    getAdoptionSuccess(state, action) {\r\n      state.adoption = action.payload;\r\n      state.loading = false;\r\n    },\r\n    createAdoptionSuccess(state, action) {\r\n      state.adoptions.unshift(action.payload);\r\n      state.loading = false;\r\n    },\r\n    deleteAdoption(state, action) {\r\n      const { id } = action.payload;\r\n      state.adoptions = state.adoptions.filter(\r\n        (adoption) => adoption._id !== id\r\n      );\r\n      state.loading = false;\r\n    },\r\n    applyAdoptionSuccess(state, action) {\r\n      const updatedAdoptions = state.adoptions.map((adoption) => {\r\n        if (adoption._id === action.payload._id) {\r\n          return action.payload;\r\n        }\r\n        return adoption;\r\n      });\r\n      state.adoptions = updatedAdoptions;\r\n      state.loading = false;\r\n    },\r\n    cancelApplySuccess(state, action) {\r\n      const updatedAdoptions = state.adoptions.map((adoption) => {\r\n        if (adoption._id === action.payload._id) {\r\n          return action.payload;\r\n        }\r\n        return adoption;\r\n      });\r\n      state.adoptions = updatedAdoptions;\r\n      state.loading = false;\r\n    },\r\n    clearAdoptions(state, action) {\r\n      state.adoptions = [];\r\n    },\r\n    adoptionError(state, action) {\r\n      state.error = action.payload;\r\n      state.loading = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  getAdoptionsSuccess,\r\n  createAdoptionSuccess,\r\n  getAdoptionSuccess,\r\n  deleteAdoption,\r\n  applyAdoptionSuccess,\r\n  cancelApplySuccess,\r\n  clearAdoptions,\r\n  adoptionError,\r\n} = adoptionSlice.actions;\r\n\r\n// Async Thunks\r\nexport const getAdoptions = () => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(\"/api/adoptions\");\r\n    dispatch(getAdoptionsSuccess(res.data));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n    console.log(error.response.data);\r\n  }\r\n};\r\n\r\nexport const getAdoption = (id) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(`/api/adoptions/${id}`);\r\n    dispatch(getAdoptionSuccess(res.data));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n  }\r\n};\r\n\r\nexport const createAdoption = (kittenId) => async (dispatch) => {\r\n  const formData = { kitten: kittenId };\r\n\r\n  try {\r\n    const res = await axios.post(`/api/adoptions`, formData);\r\n    dispatch(createAdoptionSuccess(res.data));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n    console.log(error.response.data);\r\n  }\r\n};\r\n\r\nexport const removeAdoption = (id) => async (dispatch) => {\r\n  try {\r\n    await axios.delete(`/api/adoptions/${id}`);\r\n    dispatch(deleteAdoption(id));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n  }\r\n};\r\n\r\nexport const applyAdoption = (id) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.put(`/api/adoptions/apply/${id}`);\r\n    dispatch(applyAdoptionSuccess(res.data));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n  }\r\n};\r\n\r\nexport const cancelApply = (id) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.put(`/api/adoptions/cancel/${id}`);\r\n    dispatch(cancelApplySuccess(res.data));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n  }\r\n};\r\n\r\nexport default adoptionSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}