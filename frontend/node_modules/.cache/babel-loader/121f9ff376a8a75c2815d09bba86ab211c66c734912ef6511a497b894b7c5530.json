{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst initialState = {\n  adoptions: [],\n  adoption: null,\n  error: {},\n  loading: true\n};\nconst adoptionSlice = createSlice({\n  name: \"adoption\",\n  initialState,\n  reducers: {\n    getAdoptionsSuccess(state, action) {\n      state.adoptions = action.payload;\n      state.adoption = null;\n      state.loading = false;\n      console.log(state.adoptions);\n    },\n    getAdoptionSuccess(state, action) {\n      state.adoption = action.payload;\n      state.loading = false;\n    },\n    createAdoptionSuccess(state, action) {\n      state.adoptions.unshift(action.payload);\n      state.loading = false;\n    },\n    deleteAdoption(state, action) {\n      const {\n        id\n      } = action.payload;\n      state.adoptions = state.adoptions.filter(adoption => adoption._id !== id);\n      state.loading = false;\n    },\n    applyAdoptionSuccess(state, action) {\n      const updatedAdoptions = state.adoptions.map(adoption => {\n        if (adoption._id === action.payload._id) {\n          return action.payload;\n        }\n        return adoption;\n      });\n      state.adoptions = updatedAdoptions;\n      state.loading = false;\n    },\n    cancelApplySuccess(state, action) {\n      const updatedAdoptions = state.adoptions.map(adoption => {\n        if (adoption._id === action.payload._id) {\n          return action.payload;\n        }\n        return adoption;\n      });\n      state.adoptions = updatedAdoptions;\n      state.loading = false;\n    },\n    adoptionError(state, action) {\n      state.error = action.payload;\n      state.loading = false;\n    }\n  }\n});\nexport const {\n  getAdoptionsSuccess,\n  createAdoptionSuccess,\n  getAdoptionSuccess,\n  deleteAdoption,\n  applyAdoptionSuccess,\n  cancelApplySuccess,\n  adoptionError\n} = adoptionSlice.actions;\n\n// Async Thunks\nexport const getAdoptions = () => async dispatch => {\n  try {\n    const res = await axios.get(\"/api/adoptions\");\n    console.log(res);\n    dispatch(getAdoptionsSuccess(res.data));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n    console.log(error.response.data);\n  }\n};\nexport const getAdoption = id => async dispatch => {\n  try {\n    const res = await axios.get(`/api/adoptions/${id}`);\n    dispatch(getAdoptionSuccess(res.data));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n  }\n};\nexport const createAdoption = (ownerId, kittenId) => async dispatch => {\n  const formData = {\n    owner: ownerId,\n    kitten: kittenId\n  };\n  try {\n    const res = await axios.post(`/api/adoptions`, formData);\n    dispatch(createAdoptionSuccess(res.data));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n    console.log(error.response.data);\n  }\n};\nexport const removeAdoption = id => async dispatch => {\n  try {\n    await axios.delete(`/api/adoptions/${id}`);\n    dispatch(deleteAdoption(id));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n  }\n};\nexport const applyAdoption = id => async dispatch => {\n  try {\n    const res = await axios.put(`/api/adoptions/apply/${id}`);\n    dispatch(applyAdoptionSuccess(res.data));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n  }\n};\nexport const cancelApply = id => async dispatch => {\n  try {\n    const res = await axios.put(`/api/adoptions/cancel/${id}`);\n    dispatch(cancelApplySuccess(res.data));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n  }\n};\nexport default adoptionSlice.reducer;","map":{"version":3,"names":["createSlice","axios","initialState","adoptions","adoption","error","loading","adoptionSlice","name","reducers","getAdoptionsSuccess","state","action","payload","console","log","getAdoptionSuccess","createAdoptionSuccess","unshift","deleteAdoption","id","filter","_id","applyAdoptionSuccess","updatedAdoptions","map","cancelApplySuccess","adoptionError","actions","getAdoptions","dispatch","res","get","data","response","getAdoption","createAdoption","ownerId","kittenId","formData","owner","kitten","post","removeAdoption","delete","applyAdoption","put","cancelApply","reducer"],"sources":["C:/Users/wangz/OneDrive/文档/GitHub/Kitten/frontend/src/Redux/Reducers/AdoptionSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst initialState = {\r\n  adoptions: [],\r\n  adoption: null,\r\n  error: {},\r\n  loading: true,\r\n};\r\n\r\nconst adoptionSlice = createSlice({\r\n  name: \"adoption\",\r\n  initialState,\r\n  reducers: {\r\n    getAdoptionsSuccess(state, action) {\r\n      state.adoptions = action.payload;\r\n      state.adoption = null;\r\n      state.loading = false;\r\n      console.log(state.adoptions)\r\n    },\r\n    getAdoptionSuccess(state, action) {\r\n      state.adoption = action.payload;\r\n      state.loading = false;\r\n    },\r\n    createAdoptionSuccess(state, action) {\r\n      state.adoptions.unshift(action.payload);\r\n      state.loading = false;\r\n    },\r\n    deleteAdoption(state, action) {\r\n      const { id } = action.payload;\r\n      state.adoptions = state.adoptions.filter(\r\n        (adoption) => adoption._id !== id\r\n      );\r\n      state.loading = false;\r\n    },\r\n    applyAdoptionSuccess(state, action) {\r\n      const updatedAdoptions = state.adoptions.map((adoption) => {\r\n        if (adoption._id === action.payload._id) {\r\n          return action.payload;\r\n        }\r\n        return adoption;\r\n      });\r\n      state.adoptions = updatedAdoptions;\r\n      state.loading = false;\r\n    },\r\n    cancelApplySuccess(state, action) {\r\n      const updatedAdoptions = state.adoptions.map((adoption) => {\r\n        if (adoption._id === action.payload._id) {\r\n          return action.payload;\r\n        }\r\n        return adoption;\r\n      });\r\n      state.adoptions = updatedAdoptions;\r\n      state.loading = false;\r\n    },\r\n    adoptionError(state, action) {\r\n      state.error = action.payload;\r\n      state.loading = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  getAdoptionsSuccess,\r\n  createAdoptionSuccess,\r\n  getAdoptionSuccess,\r\n  deleteAdoption,\r\n  applyAdoptionSuccess,\r\n  cancelApplySuccess,\r\n  adoptionError,\r\n} = adoptionSlice.actions;\r\n\r\n// Async Thunks\r\nexport const getAdoptions = () => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(\"/api/adoptions\");\r\n    console.log(res)\r\n    dispatch(getAdoptionsSuccess(res.data));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n    console.log(error.response.data);\r\n  }\r\n};\r\n\r\nexport const getAdoption = (id) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(`/api/adoptions/${id}`);\r\n    dispatch(getAdoptionSuccess(res.data));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n  }\r\n};\r\n\r\nexport const createAdoption = (ownerId, kittenId) => async (dispatch) => {\r\n  const formData = { owner: ownerId, kitten: kittenId };\r\n\r\n  try {\r\n    const res = await axios.post(`/api/adoptions`, formData);\r\n    dispatch(createAdoptionSuccess(res.data));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n    console.log(error.response.data);\r\n  }\r\n};\r\n\r\nexport const removeAdoption = (id) => async (dispatch) => {\r\n  try {\r\n    await axios.delete(`/api/adoptions/${id}`);\r\n    dispatch(deleteAdoption(id));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n  }\r\n};\r\n\r\nexport const applyAdoption = (id) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.put(`/api/adoptions/apply/${id}`);\r\n    dispatch(applyAdoptionSuccess(res.data));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n  }\r\n};\r\n\r\nexport const cancelApply = (id) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.put(`/api/adoptions/cancel/${id}`);\r\n    dispatch(cancelApplySuccess(res.data));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n  }\r\n};\r\n\r\nexport default adoptionSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}