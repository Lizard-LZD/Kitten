{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst initialState = {\n  adoptions: [],\n  adoption: null,\n  error: {},\n  loading: true\n};\nconst adoptionSlice = createSlice({\n  name: \"adoption\",\n  initialState,\n  reducers: {\n    getAdoptionsSuccess(state, action) {\n      state.adoptions = action.payload;\n      state.adoption = null;\n      state.loading = false;\n    },\n    createAdoptionSuccess(state, action) {\n      state.adoptions.unshift(action.payload);\n      state.loading = false;\n    },\n    adoptionError(state, action) {\n      state.error = action.payload;\n      state.loading = false;\n    },\n    getAdoptionSuccess(state, action) {\n      state.adoption = action.payload;\n      state.loading = false;\n    },\n    deleteAdoption(state, action) {\n      const {\n        id\n      } = action.payload;\n      state.adoptions = state.adoptions.filter(adoption => adoption._id !== id);\n      state.loading = false;\n    }\n  }\n});\nexport const {\n  getAdoptionsSuccess,\n  createAdoptionSuccess,\n  adoptionError,\n  getAdoptionSuccess,\n  deleteAdoption\n} = adoptionSlice.actions;\n\n// Async Thunks\nexport const getAdoptions = () => async dispatch => {\n  try {\n    const res = await axios.get(\"/api/adoptions\");\n    dispatch(getAdoptionsSuccess(res.data));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n    console.log(error.response.data);\n  }\n};\nexport const createAdoption = (profileId, kittenId) => async dispatch => {\n  const formData = {\n    profile: profileId,\n    kitten: kittenId\n  };\n  try {\n    const res = await axios.post(`/api/adoptions`, formData);\n    dispatch(createAdoptionSuccess(res.data));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n    console.log(error.response.data);\n  }\n};\nexport const getAdoption = id => async dispatch => {\n  try {\n    const res = await axios.get(`/api/adoptions/${id}`);\n    dispatch(getAdoptionSuccess(res.data));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n  }\n};\nexport const removeAdoption = id => async dispatch => {\n  try {\n    await axios.delete(`/api/adoptions/${id}`);\n    dispatch(deleteAdoption(id));\n  } catch (error) {\n    dispatch(adoptionError(error.response.data));\n  }\n};\nexport default adoptionSlice.reducer;","map":{"version":3,"names":["createSlice","axios","initialState","adoptions","adoption","error","loading","adoptionSlice","name","reducers","getAdoptionsSuccess","state","action","payload","createAdoptionSuccess","unshift","adoptionError","getAdoptionSuccess","deleteAdoption","id","filter","_id","actions","getAdoptions","dispatch","res","get","data","response","console","log","createAdoption","profileId","kittenId","formData","profile","kitten","post","getAdoption","removeAdoption","delete","reducer"],"sources":["C:/Users/wangz/OneDrive/文档/GitHub/Kitten/frontend/src/Redux/Reducers/AdoptionSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst initialState = {\r\n  adoptions: [],\r\n  adoption: null,\r\n  error: {},\r\n  loading: true,\r\n};\r\n\r\nconst adoptionSlice = createSlice({\r\n  name: \"adoption\",\r\n  initialState,\r\n  reducers: {\r\n    getAdoptionsSuccess(state, action) {\r\n      state.adoptions = action.payload;\r\n      state.adoption = null;\r\n      state.loading = false;\r\n    },\r\n    createAdoptionSuccess(state, action) {\r\n      state.adoptions.unshift(action.payload);\r\n      state.loading = false;\r\n    },\r\n    adoptionError(state, action) {\r\n      state.error = action.payload;\r\n      state.loading = false;\r\n    },\r\n    getAdoptionSuccess(state, action) {\r\n      state.adoption = action.payload;\r\n      state.loading = false;\r\n    },\r\n    deleteAdoption(state, action) {\r\n      const { id } = action.payload;\r\n      state.adoptions = state.adoptions.filter(\r\n        (adoption) => adoption._id !== id\r\n      );\r\n      state.loading = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  getAdoptionsSuccess,\r\n  createAdoptionSuccess,\r\n  adoptionError,\r\n  getAdoptionSuccess,\r\n  deleteAdoption,\r\n} = adoptionSlice.actions;\r\n\r\n// Async Thunks\r\nexport const getAdoptions = () => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(\"/api/adoptions\");\r\n    dispatch(getAdoptionsSuccess(res.data));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n    console.log(error.response.data);\r\n  }\r\n};\r\n\r\nexport const createAdoption = (profileId, kittenId) => async (dispatch) => {\r\n  const formData = { profile: profileId, kitten: kittenId };\r\n\r\n  try {\r\n    const res = await axios.post(`/api/adoptions`, formData);\r\n    dispatch(createAdoptionSuccess(res.data));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n    console.log(error.response.data);\r\n  }\r\n};\r\n\r\nexport const getAdoption = (id) => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(`/api/adoptions/${id}`);\r\n    dispatch(getAdoptionSuccess(res.data));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n  }\r\n};\r\n\r\nexport const removeAdoption = (id) => async (dispatch) => {\r\n  try {\r\n    await axios.delete(`/api/adoptions/${id}`);\r\n    dispatch(deleteAdoption(id));\r\n  } catch (error) {\r\n    dispatch(adoptionError(error.response.data));\r\n  }\r\n};\r\n\r\nexport default adoptionSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}